{% extends settings.utils.LayoutSettings.base_template %}
{% load static wagtailimages_tags %}

{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}

{% block main_content %}
<main id="content">
    <h1 class="visually-hidden">Welcome to the <abbr title="Internet Engineering Task Force">IETF</abbr></h1>
    <!--  Jumbotron -->
    {% image self.main_image max-4000x4000 as bg_image %}
    <section class="jumbotron text-white home_page__jumbotron-iab"
        style="background-image: url({% if bg_image.url %}{{ bg_image.url }}{% else %}{% static 'img/group-01.jpg' %}{% endif %});">
        <div class="container position-relative">
            <h1 class="h1-iab" >{{ self.heading }}</h1>
            <p class="lead">{{ self.introduction }}</p>
            {% if self.button_link %}
                <p>
                    <a href="{{ self.button_link.url }}"
                        class="btn btn-secondary-iab text-white my-2">{{ self.button_text }}</a>
                </p>
            {% endif %}
        </div>
    </section>

    <!-- Blog Posts -->
    <!-- style="margin-bottom: 4rem; margin-top: 4rem;" -->
    <div class="container my-5" >
        <div class="row">
            <section class="col-md-6">
                <h2 class="mb-4">Blog posts</h2>
                <ul class="list-unstyled">
                    {% with self.upcoming_events.0 as event %}
                        {% if event %}
                            {% include "includes/blog_post_iab.html" %}
                        {% endif %}
                    {% endwith %}
                    {% with self.upcoming_events.1 as event %}
                        {% if event %}
                            {% include "includes/blog_post_iab.html" %}
                        {% endif %}
                    {% endwith %}
                </ul>
                <a class="btn btn-secondary-iab text-white" href="{{ self.event_index.url }}">All IAB blog posts on IETF website</a>
            </section>
            <section class="col-md-6">
                <h2 class="mb-4">News & announcements</h2>
                <ul class="list-unstyled">
                    {% for blog in self.blogs %}
                        <li class="card mb-2">
                            <div class="card-body">
                                <h3 class="h5">
                                    <a class="stretched-link" href="{{ blog.url }}">
                                        {{ blog.title }}&nbsp;
                                        <span class="icon ion-ios-arrow-forward"></span>
                                    </a>
                                </h3>
                                <p class="card-text">{{ blog.feed_text }}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="border-start border-secondary ps-2">
                                        <span>{{ blog.author.name }}</span>
                                        <span>{{ blog.author.title }}</span>
                                        <span>{{ blog.date|date:"DATE_FORMAT" }}</span>
                                    </small>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
                <a class="btn btn-secondary-iab text-white" href="{{ self.blog_index.url }}">All news & announcements</a>
            </section>
        </div>
    </div>
</main>
{% endblock main_content %}
